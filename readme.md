# Автоматизация и деплой. Итоговая работа

Само задание можно посмотреть в фале "[Описание.md](Описание.md)"

> Все необходимые библиотеки находятся в файле `requirements.txt`

## Этапы работы:

### Логирование работы
Логирование работы скриптов пишется в файлы `/logs/{today}.log`, где `{today}` - сегодняшняя дата.

### Генерация чека

С помощью скрипта `generate_data.py` генерируются чеки в формате `*.csv`, имитируя выгрузку чеков из `N` кассовых аппаратов сети магазинов  в папку `data/`.
   - Файлы с выгрузками называются `{shop_num}_{cash_num}.csv`, где `{shop_num}` - номер магазина, а `{cash_num}` - номер кассы.
   - В одном магазине может быть много касс - у каждой своя выгрузка.
   - Пример названия: `11_2.csv` - 11 магазин, 2 касса.
   - Формат выгрузки:
     - `doc_id` - численно-буквенный идентификатор чека
     - `doc_dt` - дата и время покупки
     - `item` - название товара
     - `category` - категория товара
     - `amount` - кол-во товара в чеке
     - `price` - цена одной позиции без учета скидки
     - `discount` - сумма скидки на эту позицию (может быть 0)
   - Генерация происходит с помощью модулей `random`, `numpy` и `faker`.
     - Если не установлены `requirements.txt`, тогда следует установить их отдельно: `pip install numpy, faker` 

### Подключение к БД PostgreSQL

Подключение к БД происходит через класс `PGDatabase` в файле `pgdb.py`. Так как нам нужно только заносить данные, то добавлена только одна функция `post`, для занесения данных в БД.

### Выгрузка в БД
Выгружаются файлы `.csv` из директории `data/`. Другие форматы файлов игнорируются.

Выполняется проверка содержимого файла на соответствие формата выгрузки (наличие необходимых столбцов)

